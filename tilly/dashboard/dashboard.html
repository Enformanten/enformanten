<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Performance Overview</title>
    <link rel="stylesheet" type="text/css" href="/dashboard/styles.css">
</head>
<body>
    <div class="header">
        Performance Overview
    </div>

    <div class="iframe-container">
        <!-- Iframes will be inserted here -->
    </div>

    <div class="footer">
        <button onclick="prevSchool()">Previous School</button>
        <button onclick="nextSchool()">Next School</button>
    </div>

    <script>
        var plots = {{ plots | tojson | safe }};

        if(Object.keys(plots).length === 0) {
            // No models are trained, so display the message
            var iframeContainer = document.querySelector('.iframe-container');
            var message = document.createElement('p');
            message.innerHTML = `No models trained, so no logs to display.
            For API instructions, please check out the <a href="/docs">docs</a>`;
            iframeContainer.appendChild(message);
        } else {
            // Existing logic to display plots
            var municipalities = Object.keys(plots);
            var currentMunicipalityIndex = 0;
            var currentSchoolIndex = 0;

            function updateIframes() {
                var iframeContainer = document.querySelector('.iframe-container');
                iframeContainer.innerHTML = ''; // Clear existing iframes

                var currentMunicipality = municipalities[currentMunicipalityIndex];
                var currentSchool = Object.keys(plots[currentMunicipality])[currentSchoolIndex];
                var rooms = plots[currentMunicipality][currentSchool];

                rooms.forEach(function(room) {
                    var iframe = document.createElement('iframe');
                    iframe.src = `/plots/${currentMunicipality}/${currentSchool}/${room}`;
                    iframeContainer.appendChild(iframe);
                });
            }

            window.onload = function() {
                updateIframes();
            }
        }
    </script>
</body>
</html>
